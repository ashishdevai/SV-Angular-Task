<form class="company-form" (ngSubmit)="onSubmit()">


  <!-- ================= HEADER ================= -->
  <div class="page-header">Company</div>
  <div class="section-header">Add Company Details</div>

  <!-- ================= COMPANY DETAILS ================= -->
  <div class="form-grid">

    <!-- Country -->
    <div class="form-group">
      <label>Select Country <span>*</span></label>
      <select
        [(ngModel)]="selectedCountryId"
        name="country"
        (change)="onCountryChange()">

        <option value="">Select Country</option>
        <option
          *ngFor="let country of countryList()"
          [value]="country.countryCode">
          {{ country.name }}
        </option>
      </select>
    </div>

    <!-- State -->
    <div class="form-group">
      <label>Select State <span>*</span></label>
      <select
        [(ngModel)]="selectedStateId"
        name="state"
        (change)="onStateChange()"
        [disabled]="!stateList.length">

        <option value="">Select State</option>
        <option
          *ngFor="let state of stateList"
          [value]="state.stateCode">
          {{ state.name }}
        </option>
      </select>
    </div>

    <!-- District -->
    <div class="form-group">
      <label>Select District <span>*</span></label>
      <select
        [(ngModel)]="selectedDistrictId"
        name="district"
        (change)="onDistrictChange()"
        [disabled]="!districtList.length">

        <option value="">Select District</option>
        <option
          *ngFor="let district of districtList"
          [value]="district.districtCode">
          {{ district.name }}
        </option>
      </select>
    </div>

    <!-- City -->
    <div class="form-group">
      <label>Select City <span>*</span></label>
      <select
        [(ngModel)]="selectedCityId"
        name="city"
        (change)="onCityChange()"
        [disabled]="!cityList.length">

        <option value="">Select City</option>
        <option
          *ngFor="let city of cityList"
          [value]="city.cityCode">
          {{ city.name }}
        </option>
      </select>
    </div>

    <!-- Other Inputs -->
    <div class="form-group">
      <label>Pin Code <span>*</span></label>
      <input type="text"
       placeholder="Pin Code"
       [(ngModel)]="companyForm.pinCode"
       name="pinCode">

    </div>

    <div class="form-group">
      <label>Company <span>*</span></label>
      <input type="text"
       placeholder="Company"
       [(ngModel)]="companyForm.companyName"
       name="companyName">

    </div>

    <div class="form-group">
      <label>Company Path <span>*</span></label>
      <input type="text" 
      placeholder="Company Path"
      [(ngModel)]="companyForm.companyShortName"
       name="companyShortName">
    </div>

    <div class="form-group">
      <label>Email Address <span>*</span></label>
      <input type="email"
       placeholder="Email Address"
       [(ngModel)]="companyForm.email"
       name="email">

    </div>

    <div class="form-group">
      <label>Phone Number <span>*</span></label>
      <input type="text" 
      placeholder="Phone Number"
      [(ngModel)]="companyForm.phone"
       name="phone">
    </div>

    <div class="form-group">
      <label>Mobile Number <span>*</span></label>
      <input type="text" 
      placeholder="9559123391"
      [(ngModel)]="companyForm.mobile"
       name="mobile">
    </div>

    <div class="form-group">
      <label>Company GSTIN Number <span>*</span></label>
      <input type="text" 
      placeholder="Company GSTIN Number"
      [(ngModel)]="companyForm.gstin"
       name="gstin">
    </div>

    <div class="form-group">
      <label>Company PAN Number <span>*</span></label>
      <input type="text" 
       placeholder="Company PAN Number"
       [(ngModel)]="companyForm.pan"
       name="pan">
    </div>

    <div class="form-group">
      <label>Registration Date <span>*</span></label>
      <input type="date" 
       placeholder="Registration Date"
       [(ngModel)]="companyForm.registrationDate"
       name="registrationDate">
    </div>

    <div class="form-group">
      <label>Register Id Number <span>*</span></label>
      <input type="text" 
       placeholder="Register Id Number"
       [(ngModel)]="companyForm.registerId"
       name="registerId">
    </div>

    <div class="form-group">
      <label>CIN Number <span>*</span></label>
      <input type="text" 
       placeholder="CIN Number"
       [(ngModel)]="companyForm.cin"
       name="cin">
    </div>

  </div>

  <!-- ================= ADDRESS ================= -->
  <div class="form-grid two-column">
    <div class="form-group">
      <label>Address <span>*</span></label>
      <input type="text" 
       placeholder="Address"
       [(ngModel)]="companyForm.address"
       name="address">
    </div>
  </div>

  <!-- ================= DOCUMENT UPLOAD ================= -->
  <div class="section-header">Upload Company Document</div>
  <div class="form-grid">
    <div class="form-group">
      <label>GST Image <span>*</span></label>
      <input type="file" (change)="onFileSelect($event, 'gst')">
    </div>

    <div class="form-group">
      <label>Pan Card Image <span>*</span></label>
      <input type="file" (change)="onFileSelect($event, 'pan')">
    </div>

    <div class="form-group">
      <label>Logo Image <span>*</span></label>
      <input type="file" (change)="onFileSelect($event, 'logo')">
    </div>
  </div>

  <!-- ================= SPOC DETAILS ================= -->
  <div class="section-header">Add Company SPOC Details</div>
  <div class="form-grid">
    <div class="form-group">
      <label>SPOC Name <span>*</span></label>
      <input type="text" 
       placeholder="SPOC Name"
       [(ngModel)]="companyForm.spocName"
       name="spocName">
    </div>

    <div class="form-group">
      <label>SPOC Email Address <span>*</span></label>
      <input type="email" 
       placeholder="SPOC Email Address"
       [(ngModel)]="companyForm.spocEmail"
       name="spocEmail">
    </div>

    <div class="form-group">
      <label>SPOC Mobile Number <span>*</span></label>
      <input type="text" 
       placeholder="SPOC Mobile Number"
       [(ngModel)]="companyForm.spocMobile"
       name="spocMobile">
    </div>
  </div>

  <!-- ================= SPOC PROFILE PIC ================= -->
  <div class="form-grid one-column">
    <div class="form-group">
      <label>SPOC Profile Pic <span>*</span></label>
      <input type="file" (change)="onFileSelect($event, 'profile')">
    </div>
  </div>

  <!-- ================= SAVE BUTTON ================= -->
  <div class="form-actions">
  <button
    type="submit"
    class="btn-save"
    [ngStyle]="{ background: isEditMode ? '#ff9800' : '#1f4bff' }">
    
    {{ isEditMode ? 'Update' : 'Save' }}

  </button>
</div>


<!-- ================= COMPANY LIST ================= -->
<div class="table-responsive mt-4">
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Company</th>
        <th>Mobile</th>
        <th>Country</th>
        <th>Action</th> <!-- ðŸ”¥ new -->
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let c of tableData; let i = index">

        <td>{{ c.name }}</td>
        <td>{{ c.contactNo }}</td>
        <td>{{ c.country }}</td>

        <!-- ðŸ”¥ ICON BUTTONS -->
        <td>

           <!-- VIEW -->
          <i class="bi bi-eye text-primary me-3 icon-action"
          (click)="viewCompany(c)"
          title="View"></i>

           <!-- EDIT -->
         <i class="bi bi-pencil-square text-warning me-3 icon-action"
         (click)="editCompany(c)"
         title="Edit"></i>

          <!-- DELETE -->
         <i class="bi bi-trash text-danger icon-action"
         (click)="deleteCompany(i)"
         title="Delete"></i>

        </td>

      </tr>

      <tr *ngIf="!tableData?.length">
        <td colspan="4" class="text-center text-muted">
          No companies found
        </td>
      </tr>
    </tbody>
  </table>
</div>
